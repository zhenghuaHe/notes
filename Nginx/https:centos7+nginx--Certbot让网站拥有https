
因公司发展需要，需要给公司的网站访问做上https,详细步骤如下：

参考：
http://www.cnblogs.com/one-villager/p/certbot_build_https.html
安装教程：https://certbot.eff.org/#centos6-nginx

$ yum install epel-release -y
$ wget https://dl.eff.org/certbot-auto　　　＃获取
$ chmod a+x ./certbot-auto　　　　　　　　　　　#赋予权限
$ 1　　　　#换成自己的域名即可
How would you like to authenticate with the ACME CA?
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: Apache Web Server plugin (apache)
2: Nginx Web Server plugin (nginx)
3: Spin up a temporary webserver (standalone)
4: Place files in webroot directory (webroot)
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate number [1-4] then [enter] (press 'c' to cancel): 　　　　　　#输入２，根据自己需要选择,接下来的通过即可

Cleaning up challenges

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/hzh.ettda.net/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/hzh.ettda.net/privkey.pem
   Your cert will expire on 2019-03-12. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot-auto
   again. To non-interactively renew *all* of your certificates, run
   "certbot-auto renew"
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le

#见到这个信息就是成功了。

$ find /etc/ -name *.pem
/etc/letsencrypt/archive/hzh.ettda.net/chain1.pem
/etc/letsencrypt/archive/hzh.ettda.net/privkey1.pem
/etc/letsencrypt/archive/hzh.ettda.net/cert1.pem
/etc/letsencrypt/archive/hzh.ettda.net/fullchain1.pem
/etc/letsencrypt/live/hzh.ettda.net/privkey.pem
/etc/letsencrypt/live/hzh.ettda.net/chain.pem
/etc/letsencrypt/live/hzh.ettda.net/cert.pem
/etc/letsencrypt/live/hzh.ettda.net/fullchain.pem

$ vim /etc/nginx/conf.d/default.conf
server {
    listen    80;
    server_name hzh.ettda.net;
    root /usr/share/nginx/html;
    location / {
#        return 301 https://$server_name$request_uri;
        proxy_pass   http://127.0.0.1:8080/index.html;
    }

    location ~ \.php$ {
      return 403;
    }

}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name hzh.ettda.net;
    root /usr/share/nginx/html;

    # certs sent to the client in SERVER HELLO are concatenated in ssl_certificate
    ssl_certificate /etc/letsencrypt/live/hzh.ettda.net/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/hzh.ettda.net/privkey.pem;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;

    # Diffie-Hellman parameter for DHE ciphersuites, recommended 2048 bits
    ssl_trusted_certificate  /etc/letsencrypt/live/hzh.ettda.net/chain.pem;

    # intermediate configuration. tweak to your needs.
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_prefer_server_ciphers on;

    # HSTS (ngx_http_headers_module is required) (15768000 seconds = 6 months)
    add_header Strict-Transport-Security max-age=15768000;

    # OCSP Stapling ---
    # fetch OCSP records from URL in ssl_certificate and cache them
    ssl_stapling on;
    ssl_stapling_verify on;
    location / {
#        return 301 https://$server_name$request_uri;
        proxy_pass   http://127.0.0.1:8080/index.html;
    }
    location ~ \.php$ {
      return 403;
    }
}

随意访问自己的域名就会发现变成了https的啦～
